"use strict";(self.webpackChunkpayload_template_ts_blank=self.webpackChunkpayload_template_ts_blank||[]).push([[860],{63860:function(e,l,t){t.r(l),t.d(l,{default:function(){return k}});var a=t(67294),n=t(9980),o=t(28630),i=t(75091),s=t(2143),r=t(16550),c=t(26793),u=t(28584),d=t(77329);t(86456);const m="card";var p=e=>{const{id:l,title:t,actions:n,onClick:o}=e,i=[m,l,o&&`${m}--has-onclick`].filter(Boolean).join(" ");return a.createElement("div",{className:i,id:l},a.createElement("h5",null,t),n&&a.createElement("div",{className:`${m}__actions`},n),o&&a.createElement(d.Z,{className:`${m}__click`,buttonStyle:"none",onClick:o}))},v=t(69850),b=t(1763),y=t(28960);t(75634);const E="dashboard";var f=e=>{const{collections:l,globals:t,permissions:o}=e,{push:i}=(0,r.k6)(),{i18n:s}=(0,c.$)("general"),{routes:{admin:m},admin:{components:{afterDashboard:f,beforeDashboard:k}}}=(0,n.Z)(),[g,_]=(0,a.useState)([]);return(0,a.useEffect)((()=>{_((0,b.V)([...l.map((e=>({type:b.p.collection,entity:e}))),...t.map((e=>({type:b.p.global,entity:e})))],o,s))}),[l,t,s,o]),a.createElement("div",{className:E},a.createElement(u.Z,null),a.createElement(v.T,{className:`${E}__wrap`},Array.isArray(k)&&k.map(((e,l)=>a.createElement(e,{key:l}))),g.map((({label:e,entities:l},t)=>a.createElement(a.Fragment,{key:t},a.createElement("h2",{className:`${E}__label`},e),a.createElement("ul",{className:`${E}__card-list`},l.map((({entity:e,type:l},t)=>{var n,r,c;let u,v,E,f;return l===b.p.collection&&(u=(0,y.i)(e.labels.plural,s),E=()=>i({pathname:`${m}/collections/${e.slug}`}),v=`${m}/collections/${e.slug}/create`,f=null===(c=null===(r=null===(n=null==o?void 0:o.collections)||void 0===n?void 0:n[e.slug])||void 0===r?void 0:r.create)||void 0===c?void 0:c.permission),l===b.p.global&&(u=(0,y.i)(e.label,s),E=()=>i({pathname:`${m}/globals/${e.slug}`})),a.createElement("li",{key:t},a.createElement(p,{title:u,id:`card-${e.slug}`,onClick:E,actions:f&&l===b.p.collection?a.createElement(d.Z,{el:"link",to:v,icon:"plus",round:!0,buttonStyle:"icon-label",iconStyle:"with-border"}):void 0}))})))))),Array.isArray(f)&&f.map(((e,l)=>a.createElement(e,{key:l})))))};var k=()=>{const{permissions:e}=(0,o.a)(),{setStepNav:l}=(0,i.FP)(),[t,r]=(0,a.useState)([]),{collections:c,globals:u,admin:{components:{views:{Dashboard:d}={Dashboard:void 0}}={}}={}}=(0,n.Z)();return(0,a.useEffect)((()=>{r(u.filter((l=>{var t,a,n;return null===(n=null===(a=null===(t=null==e?void 0:e.globals)||void 0===t?void 0:t[l.slug])||void 0===a?void 0:a.read)||void 0===n?void 0:n.permission})))}),[e,u]),(0,a.useEffect)((()=>{l([])}),[l]),a.createElement(s.Z,{DefaultComponent:f,CustomComponent:d,componentProps:{globals:t,collections:c.filter((l=>{var t,a,n;return null===(n=null===(a=null===(t=null==e?void 0:e.collections)||void 0===t?void 0:t[l.slug])||void 0===a?void 0:a.read)||void 0===n?void 0:n.permission})),permissions:e}})}}}]);